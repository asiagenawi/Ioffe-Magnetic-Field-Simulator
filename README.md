# Ioffe Magnetic Field Simulation

A C++ simulation using ROOT to calculate and visualize the magnetic field distribution of an Ioffe trap configuration with multiple current-carrying wires.

## Description

This program simulates the magnetic field generated by two sets of current-carrying wires arranged in circular configurations. It uses the Biot-Savart law to calculate field strengths and generates a 2D heat map visualization of the magnetic field magnitude.

## Physics Background

An Ioffe trap uses a specific arrangement of current-carrying wires to create a magnetic field minimum, useful for trapping neutral atoms or charged particles. This simulation models:
- Two sets of 8 wires each arranged in circular patterns
- One set carrying +400 A current (positive)
- One set carrying -400 A current (negative)
- The negative set is rotationally offset by π/nWires radians

## Prerequisites

- ROOT framework (CERN's data analysis software)
- C++ compiler with C++11 support or later
- Standard C++ libraries

## Configuration Parameters

The following constants in [magnetic.cpp](magnetic.cpp) can be modified:

- `radius`: Wire circle radius (0.18 m)
- `nWires`: Number of wires per set (8)
- `npixels`: Resolution of the field map (100x100)
- Wire current: ±400 A (hardcoded in [magnetic.cpp:76-80](magnetic.cpp#L76-L80))
- Field map range: -0.3 to 0.3 m in both x and y

## Key Functions

### Physics Calculations
- `DistanceBetweenTwoPoints()`: Calculates Euclidean distance between two points
- `BiotSavartField()`: Computes magnetic field magnitude using Biot-Savart law
- `bFieldX()`, `bFieldY()`: Calculate field components in x and y directions
- `GetBFieldMag()`: Computes total field magnitude at a given position from all wires

### Wire Positioning
- `xValues()`, `yValues()`: Generate wire positions in circular arrangement
- `gCircle()`: Creates TGraph objects for wire position visualization

### Visualization
- `hFieldMap()`: Generates 2D histogram of magnetic field magnitude
- `DrawCanvas()`: Creates and exports visualization with wire positions overlaid
- `go()`: Main execution function that orchestrates the simulation

## Usage

Run this code in ROOT:

```bash
root -l magnetic.cpp
go()
```

Or compile and run as a ROOT macro:

```bash
root
.L magnetic.cpp
go()
```

## Output

- **WireTest.png**: 2D color map visualization showing:
  - Magnetic field magnitude (color scale in Tesla)
  - Positive current wires (red markers)
  - Negative current wires (blue markers)
  - Viridis color palette for field strength

## Physical Constants

- `PI`: 3.1415926
- `mu0`: Magnetic permeability of free space (4π × 10⁻⁷ T·m/A)

## Notes

- The simulation assumes infinite straight wires (2D approximation)
- Debug output is printed to console showing field values at each calculation
- The field map uses 100×100 pixel resolution covering a 0.6m × 0.6m area
- Wire positions are calculated at runtime based on the circular arrangement
